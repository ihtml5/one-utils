!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e["norton\b\b\bWX"]={})}(this,function(e){"use strict";var n=!wx||!Page||!App,t=n?getApp():void 0,r=function(e){return"[object Object]"===Object.prototype.toString.call(e)},o=function(e){return"string"==typeof e},c=function(e){return"function"==typeof e},i=function(e){return void 0===e},u=function(e){if(r(e)){var n=e.key,t=e.data,u=e.success,f=e.fail,a=(e.complete,e.sync);if(!o(n)&&!i(n))return!1;if(!o(t)||!r(t))return!1;if(!c(u)&&!a&&!i(f))return!1;if(!c(f)&&!a&&!i(f))return!1}return!1},f=function(){},a=function(){var e=getCurrentPages();return e[e.length-1].route},s=Object.prototype.hasOwnProperty,l=-1,g={},p={on:function(e,n,t){g[e]||(g[e]=[]);var r=config.nameSpace+"-uid-"+l++;return g[e].push({context:t,cb:n,token:r}),r},clearAll:function(){g={}},clear:function(e){g[e]&&delete g[e]},off:function(e){var n="string"==typeof e&&(s.call(g,e)||function(e){for(var n in g)if(s.call(g,n)&&0===n.indexOf(e))return!0;return!1}(e)),t=!n&&"string"==typeof e,r="function"==typeof e,o=null,c=!0,i=null;if(!n){for(o in g)if(s.call(g,o))for(var u=0,f=(i=g[o]).length;u<f;u++)t&&i[u].token===e?(i.splice(u,1),c=e):r&&i[u].cb===e&&(g[o].splice(u,1),c=!0);return c}p.clear(e)},once:function(e,n){g[e]||(g[e]=[]),g[e].push({context:this,cb:n,once:!0})},trigger:function(e,n,t){if(s.call(g,e))return!0===t?setTimeout(o,0):o(),!0;function r(e,n,t){function r(n){e.cb&&e.cb.call(e.context,n),e.once&&(e.cb=function(){})}if(!0===t)try{r(n)}catch(e){setTimeout((o=e,function(){throw o}),0)}var o;r(n)}function o(){if(s.call(g,e))for(var o=g[e],c=o.length,i=0;i<c;i++)r(o[i],n,t)}}},m={phoneNumber:/^[1][3,4,5,7,8][0-9]{9}$/,email:/^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\.)+(com|cn|net|org)$/,qq:/^[0-9]{5,10}$/},y=p.on,v=p.off,w=p.trigger,d=p.once;e.isWxAppEnv=n,e.AppInfo=t,e.page=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n?Page(e):function(e){}},e.isObject=r,e.isString=o,e.isFunction=c,e.isUndefined=i,e.isNumber=function(e){return"number"==typeof e},e.setItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(e)){var n=e.key,t=e.data,r=(e.success,e.fail,e.complete,e.sync);try{return r?wx.setStorageSync(n,t):wx.setStorage(e)}catch(n){console.warn("请检查传入的参数是否正确"+e)}}console.warn("请检查传入的参数是否正确"+e)},e.getItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(e)){var n=e.key,t=(e.data,e.success,e.fail,e.complete,e.sync);try{return t?wx.getStorageSync(n):wx.getStorage(e)}catch(n){console.warn("请检查传入的参数是否正确"+e)}}console.warn("请检查传入的参数是否正确"+e)},e.isVaildItemParams=u,e.fetch=function(e){var n=e.url,t=e.method,r=e.data,o=e.header;return new Promise(function(e,c){return wx.request({url:n,data:r,method:t,header:o,success:e,fail:c,complete:f})})},e.getLoginCode=function(){return new Promise(function(e,n){return wx.login({success:e,fail:n,complete:f})})},e.getUserInfo=function(){return new Promise(function(e,n){return wx.getUserInfo({success:e,fail:n,complete:f})})},e.getJWD=function(){return new Promise(function(e,n){wx.getLocation({type:"wgs84",success:e,fail:n,complete:f})})},e.getSystemInfo=function(e){return new Promise(function(n,t){return wx["getSystemInfo"+(e?"Sync":"")]({success:n,fail:t})})},e.getAll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(e))try{return e.success,e.fail,e.complete,e.sync?wx.getStorageInfoSync():wx.getStorage(e)}catch(n){console.warn("请检查传入的参数是否正确"+e)}},e.removeAll=function(e){return e?wx.clearStorageSync():wx.clearStorage()},e.removeItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(e)){var n=info,t=n.key,r=(n.success,n.fail,n.complete,n.sync);try{r&&wx.removeStorageSync(t),wx.removeStorage(e)}catch(e){console.warn("请检查传入的参数是否正确"+info)}}console.warn("请检查传入的参数是否正确"+info)},e.promisfy=function(e){return function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new Promise(function(t,o){return e.apply(void 0,[Object.assign({},n,{success:t,fail:o})].concat(r))})}},e.getCurrentPageUrl=a,e.getCurrentPageUrlWithArgs=function(){var e=a(),n=currentPage.options,t=e+"?";for(var r in n)t+=r+"="+n[r]+"&";return t=t.substring(0,t.length-1)},e.$on=y,e.$off=v,e.$trigger=w,e.$once=d,e.regex=m,e.$log=function(e){return console.log(e)},e.App=App,e.wx=wx,e.Page=Page,Object.defineProperty(e,"__esModule",{value:!0})});
